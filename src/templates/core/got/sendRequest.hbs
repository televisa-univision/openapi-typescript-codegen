async function sendRequest(
	config: OpenAPIConfig,
	options: ApiRequestOptions,
	url: string,
	onCancel: OnCancel
): Promise<Response<unknown>> {
    const gotOptions: OptionsOfUnknownResponseBody = {
        method: options.method,
        headers: await getHeaders(config, options),
        body: await getRequestBody(options),
        throwHttpErrors: false,
        timeout: config.GOT_TIMEOUT,
        retry: config.GOT_RETRY,
        agent: {
            https: config.HTTPS_AGENT,
            http: config.HTTP_AGENT,
        },
    };

    const request = got(url, gotOptions);

    onCancel(() => request.cancel());

    return await request;
}
