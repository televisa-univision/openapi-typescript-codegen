async function sendRequest(
    options: ApiRequestOptions,
    url: string,
    formData: BodyTypes | undefined,
    body: BodyTypes | undefined,
    headers: Headers,
    onCancel: OnCancel
): Promise<Response> {
    const controller = new AbortController();

    const request: Partial<FetchInit> = {
        headers,
        method: options.method,
        body: body || formData,
        signal: controller.signal,
    };

    onCancel(() => controller.abort());

    return await fetch(url, request);
}
